{% extends "competition/competition_base.html" %}
{% load competition_tags %}

{% block content %}
  <h2>Played Games</h2>
  {% for game in games %}
    {% if forloop.first %}
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Game Number</th>
            <th>Opponents</th>
            <th>Start Time</th>
            <th>End Time</th>
            {% for field in data_fields %}
              <th>{{ field }}</th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
    {% endif %}

    <tr>
      <td>{{ game.id }}</td>
      <td>
        {% for score in game.score_set.all %}
          <span {% if team = score.team %} class="label label-info"{% endif %}>{{ score.team.name }}:</span> {{ score.score }}
          <br>
        {% endfor %}
      </td>
      <td>{{ game.start_time|date:"SHORT_DATETIME_FORMAT" }}</td>
      <td>{{ game.end_time|date:"SHORT_DATETIME_FORMAT" }}</td>
      {% for field in data_fields %}
        <td>{{ game.data.display|get_item:field|default:"--" }}</td>
      {% endfor %}
    </tr>

    {% if forloop.last %}
        </tbody>
      </table>
    {% endif %}

    {% empty %}
      <h3 class="text-center">No games, yet</h3>
    {% endfor %}
  </ul>

{% include "competition/_paginator.html" with page=page_obj %}
{% endblock %}
