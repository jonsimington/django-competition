{% extends "competition/competition_base.html" %}

{% block page-header %}
  <div class="page-header" style="margin-top:20px;">
    <div class="row">
      <div id="name" class="col-sm-9 col-md-9">
        <h1>{{ competition.name }}</h1>
      </div>
      {% if not user_registered and competition.is_open %}
        <div class="col-sm-3 col-md-3">
          <a data-toggle="modal" data-target="#registerModal" href="#" class="btn btn-primary">
            Register Now!
          </a>
        </div>
        {% with body="Are you sure you want to register for "|add:competition.name|add:"?" %}
          {% url 'register_for' competition.slug as register %}
          {% include "competition/_confirmation_modal.html" with id="registerModal" title="Register?" register=True body=body action=register %}
        {% endwith %}
      {% endif %}
    </div>
    <p style="font-size:16px;">
      <i>{{ competition.description }}</i>
    </p>
  </div>
{% endblock %}

{% block content %}
  <div class="row">
    {% if competition.avatar %}
      <div id="avatar" class="col-sm-6 col-md-6">
        <br>
        <a href="{{ competition.avatar.image.url }}">
          <img src="{{ competition.avatar.image.url }}" class="img-polaroid" alt="{{ competition.name }}" style="width:100%">
        </a>
      </div>
    {% endif %}
    <div class="col-sm-6 col-md-6">
      <h2>Details</h2>
      {% include "competition/competition/_competition_detail.html" %}
      {% if user.is_authenticated and competition.is_open and not user_team %}
        <p class="text-info text-center">
          <span class="label label-info">Heads up</span>
          You must be on a team to access competition code. Be
          sure to join one!
        </p>
      {% endif %}
    </div>
  </div>
{% endblock %}

{% block script %}
  <script>
    $(function() {
      if($("#no-sidebar").length > 0) {
        $("#name").removeClass('span7').addClass('span10');
        $("#avatar").removeClass('span5').addClass('span8');
      }
    });
  </script>
{% endblock %}
